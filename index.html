<!DOCTYPE html>
<html>
<head>
    <title>Simple Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Simple Mini App Test</h1>
    <button onclick="sendData()">Send Data</button>
    <div id="status"></div>

    <script>
        let tg = window.Telegram.WebApp;
        
        function showStatus(message) {
            document.getElementById('status').textContent = message;
        }
        
        function sendData() {
            try {
                if (!tg || !tg.initDataUnsafe) {
                    showStatus('Not in Telegram context');
                    return;
                }
                
                const data = JSON.stringify({
                    action: 'test',
                    user_id: tg.initDataUnsafe.user?.id,
                    message: 'Hello from Mini App!'
                });
                
                console.log('Sending data:', data);
                tg.sendData(data);
                showStatus('Data sent successfully!');
                
            } catch (error) {
                console.error('Error:', error);
                showStatus('Error: ' + error.message);
            }
        }
        
        if (tg && tg.initDataUnsafe) {
            tg.ready();
            tg.expand();
            console.log('Telegram WebApp initialized');
            console.log('User:', tg.initDataUnsafe.user);
            showStatus('Ready to send data');
        } else {
            console.log('Not in Telegram context');
            showStatus('Please open in Telegram');
        }
    </script>
</body>
</html> 
